{"version":3,"sources":["../../src/middleware/passport.js"],"names":["FacebookStrategy","require","Strategy","SpotifyStrategy","GithubStrategy","authconfig","req","res","next","passport","use","clientID","config","facebookID","clientSecret","facebookSecret","callbackURL","profileFields","accessToken","refreshToken","profile","cb","githubID","githubSecret","spotifyID","spotifySecret","serializeUser","user","deserializeUser","obj"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,mBAAmBC,QAAQ,mBAAR,EAA6BC,QAAtD;AACA,IAAMC,kBAAkBF,QAAQ,kBAAR,EAA4BC,QAApD;AACA,IAAME,iBAAiBH,QAAQ,iBAAR,EAA2BC,QAAlD;;AAEA,IAAMG,aAAa,SAAbA,UAAa,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACrCC,qBAASC,GAAT,CAAa,IAAIV,gBAAJ,CAAqB;AAChCW,cAAUC,iBAAOC,UADe;AAEhCC,kBAAcF,iBAAOG,cAFW;AAGhCC,iBAAa,wBAHmB;AAIhCC,mBAAe,CAAC,IAAD,EAAO,aAAP,EAAsB,OAAtB;AAJiB,GAArB,EAKT,UAACC,WAAD,EAAcC,YAAd,EAA4BC,OAA5B,EAAqCC,EAArC;AAAA,WAA4CA,GAAG,IAAH,EAASD,OAAT,CAA5C;AAAA,GALS,CAAb;AAMAX,qBAASC,GAAT,CAAa,IAAIN,cAAJ,CAAmB;AAC9BO,cAAUC,iBAAOU,QADa;AAE9BR,kBAAcF,iBAAOW,YAFS;AAG9BP,iBAAa;AAHiB,GAAnB,EAIT,UAACE,WAAD,EAAcC,YAAd,EAA4BC,OAA5B,EAAqCC,EAArC;AAAA,WAA4CA,GAAG,IAAH,EAASD,OAAT,CAA5C;AAAA,GAJS,CAAb;AAKAX,qBAASC,GAAT,CAAa,IAAIP,eAAJ,CAAoB;AAC/BQ,cAAUC,iBAAOY,SADc;AAE/BV,kBAAcF,iBAAOa,aAFU;AAG/BT,iBAAa,uBAHkB;AAI/BC,mBAAe,CAAC,IAAD,EAAO,aAAP,EAAsB,OAAtB;AAJgB,GAApB,EAKT,UAACC,WAAD,EAAcC,YAAd,EAA4BC,OAA5B,EAAqCC,EAArC;AAAA,WAA4CA,GAAG,IAAH,EAASD,OAAT,CAA5C;AAAA,GALS,CAAb;AAMAX,qBAASiB,aAAT,CAAuB,UAACC,IAAD,EAAON,EAAP,EAAc;AACnCA,OAAG,IAAH,EAASM,IAAT;AACD,GAFD;;AAIAlB,qBAASmB,eAAT,CAAyB,UAACC,GAAD,EAAMR,EAAN,EAAa;AACpCA,OAAG,IAAH,EAASQ,GAAT;AACD,GAFD;AAGArB;AACD,CA1BD;kBA2BeH,U","file":"passport.js","sourcesContent":["import passport from 'passport';\nimport config from '../config.json';\n\nconst FacebookStrategy = require('passport-facebook').Strategy;\nconst SpotifyStrategy = require('passport-spotify').Strategy;\nconst GithubStrategy = require('passport-github').Strategy;\n\nconst authconfig = (req, res, next) => {\n  passport.use(new FacebookStrategy({\n    clientID: config.facebookID,\n    clientSecret: config.facebookSecret,\n    callbackURL: '/api/facebook/callback',\n    profileFields: ['id', 'displayName', 'email'],\n  }, ((accessToken, refreshToken, profile, cb) => cb(null, profile))));\n  passport.use(new GithubStrategy({\n    clientID: config.githubID,\n    clientSecret: config.githubSecret,\n    callbackURL: '/api/github/callback',\n  }, ((accessToken, refreshToken, profile, cb) => cb(null, profile))));\n  passport.use(new SpotifyStrategy({\n    clientID: config.spotifyID,\n    clientSecret: config.spotifySecret,\n    callbackURL: '/api/spotify/callback',\n    profileFields: ['id', 'displayName', 'email'],\n  }, ((accessToken, refreshToken, profile, cb) => cb(null, profile))));\n  passport.serializeUser((user, cb) => {\n    cb(null, user);\n  });\n\n  passport.deserializeUser((obj, cb) => {\n    cb(null, obj);\n  });\n  next();\n};\nexport default authconfig;\n"]}